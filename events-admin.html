<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Campus Management</title>
    <style>
        /* ... keep all your existing CSS ... */
    </style>
</head>
<body>
    <!-- Password Protection Screen -->
    <div id="password-protection" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: none; align-items: center; justify-content: center; z-index: 9999;">
        <div style="background: white; padding: 40px; border-radius: 15px; text-align: center; width: 90%; max-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
            <div style="font-size: 50px; margin-bottom: 20px; color: #667eea;">
                üîí
            </div>
            <h2 style="color: #333; margin-bottom: 10px;">Admin Access Required</h2>
            <p style="color: #666; margin-bottom: 25px;">Enter password to access dashboard</p>
            
            <input type="password" id="admin-password" 
                   placeholder="Enter admin password" 
                   style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; margin-bottom: 20px;"
                   onkeypress="if(event.key === 'Enter') checkAdminPassword()">
            
            <button onclick="checkAdminPassword()" 
                    style="width: 100%; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">
                Enter Dashboard
            </button>
            
            <p style="color: #999; font-size: 12px; margin-top: 20px;">
                Default password: campus123<br>
                <button onclick="resetPassword()" style="background: none; border: none; color: #667eea; cursor: pointer; font-size: 12px; margin-top: 10px;">
                    Reset to default password
                </button>
            </p>
        </div>
    </div>

    <!-- Your existing admin container -->
    <div class="admin-container" style="display: none;">
        <!-- ... keep all your existing admin content ... -->
    </div>

    <script>
        // ======================
        // PASSWORD MANAGEMENT
        // ======================
        
        // Set default password if not set
        if (!localStorage.getItem('admin_password')) {
            localStorage.setItem('admin_password', 'campus123');
        }
        
        function checkAdminPassword() {
            const passwordInput = document.getElementById('admin-password');
            const password = passwordInput.value;
            const correctPassword = localStorage.getItem('admin_password');
            
            if (password === correctPassword) {
                // Create session that lasts 24 hours
                const session = {
                    loggedIn: true,
                    expiry: new Date().getTime() + (24 * 60 * 60 * 1000) // 24 hours
                };
                localStorage.setItem('admin_session', JSON.stringify(session));
                
                // Hide password screen, show dashboard
                document.getElementById('password-protection').style.display = 'none';
                document.querySelector('.admin-container').style.display = 'block';
                
                // Clear password field
                passwordInput.value = '';
            } else {
                alert('‚ùå Incorrect password!');
                passwordInput.focus();
                passwordInput.select();
            }
        }
        
        function resetPassword() {
            if (confirm('Reset password to default (campus123)?')) {
                localStorage.setItem('admin_password', 'campus123');
                alert('‚úÖ Password reset to "campus123"');
                document.getElementById('admin-password').value = 'campus123';
            }
        }
        
        function checkExistingSession() {
            const session = localStorage.getItem('admin_session');
            
            if (session) {
                const sessionData = JSON.parse(session);
                const now = new Date().getTime();
                
                if (now < sessionData.expiry) {
                    // Session is valid
                    document.getElementById('password-protection').style.display = 'none';
                    document.querySelector('.admin-container').style.display = 'block';
                    return true;
                } else {
                    // Session expired
                    localStorage.removeItem('admin_session');
                }
            }
            return false;
        }
        
        function logout() {
            localStorage.removeItem('admin_session');
            document.getElementById('password-protection').style.display = 'flex';
            document.querySelector('.admin-container').style.display = 'none';
            alert('Logged out successfully');
        }
        
        // ======================
        // INITIALIZATION
        // ======================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Check for existing valid session
            if (!checkExistingSession()) {
                // Show password screen
                document.getElementById('password-protection').style.display = 'flex';
                document.getElementById('admin-password').focus();
            }
            
            // Initialize dashboard
            updateDashboard();
            
            // Add logout button to header (optional)
            const headerRight = document.querySelector('.header-right');
            headerRight.innerHTML += `
                <button onclick="logout()" style="margin-top: 10px; padding: 8px 16px; background: #ff4d4f; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Logout
                </button>
            `;
            
            // Rest of your initialization code...
            const futureDate = new Date();
            futureDate.setDate(futureDate.getDate() + 30);
            document.getElementById('brand-expiry').value = futureDate.toISOString().split('T')[0];
            
            // Auto-check for expired brands
            setInterval(function() {
                const today = getTodayDate();
                const lastCheck = localStorage.getItem('last_expiry_check');
                
                if (!lastCheck || lastCheck !== today) {
                    loadBrandsList();
                    localStorage.setItem('last_expiry_check', today);
                    updateDashboard();
                }
            }, 300000);
        });
        
        // ======================
        // KEEP ALL YOUR EXISTING FUNCTIONS BELOW
        // ======================
        
        // Your existing functions (saveEvents, saveBrands, formatDate, etc.)
        // ... keep all your existing JavaScript functions as they are ...
        
    </script>
</body>
</html>